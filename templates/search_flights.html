<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flight Booking</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Header עם לוגו ושם החברה -->
    <header class="company-header">
        <div class="company-logo-container">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Company Logo" class="company-logo">
            <span class="company-name">Fly TAU</span>
        </div>
    </header>

    <!-- רווח מעל הדף אחרי ה-Header -->
    <div class="content-container">

        <!-- הודעות שגיאה -->
        {% if errors %}
        <div class="errors">
            <ul>
            {% for error in errors %}
                <li>{{ error }}</li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- טופס חיפוש טיסות -->
        <form action="/search_flights" method="GET" class="search-form">
            <div class="input-container">
                <img src="{{ url_for('static', filename='takeoff.png') }}" alt="Origin" class="icon">
                <input type="text" name="origin" placeholder="Input Origin" value="{{ request.args.get('origin', '') }}">
            </div>

            <div class="input-container">
                <img src="{{ url_for('static', filename='landing.png') }}" alt="Destination" class="icon">
                <input type="text" name="destination" placeholder="Input Destination" value="{{ request.args.get('destination', '') }}">
            </div>

            <input type="date" name="departure_date" value="{{ departure_date or '' }}" required>
            <button type="submit">Search Flights</button>
        </form>

        <!-- כותרת לטבלה -->
        {% if flights %}
        <div class="table-header-box">
            <h1>Available Flights</h1>
        </div>

        <!-- טבלת טיסות -->
<table>
  <thead>
    <tr>
      <th>Flight Number</th>
      <th>Origin</th>
      <th>Destination</th>
      <th>Departure Date</th>
      <th>Time</th>
      <th>Regular Price</th>
      <th>Business Price</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    {% for flight in flights %}
      <tr>
        <td>{{ flight.flight_id }}</td>
        <td>{{ flight.origin_airport }}</td>
        <td>{{ flight.destination_airport }}</td>
        <td>{{ flight.departure_date }}</td>
        <td>{{ flight.departure_time }}</td>

        <!-- Regular price -->
        <td>
          {% if flight.regular_price %}
            ₪{{ "%.2f"|format(flight.regular_price) }}
          {% else %}
            —
          {% endif %}
        </td>

        <!-- Business price -->
        <td>
          {% if flight.business_price %}
            ₪{{ "%.2f"|format(flight.business_price) }}
          {% else %}
            —
          {% endif %}
        </td>

        <!-- Actions -->
        <td>
          <a href="/select_seats?flight_id={{ flight.flight_id }}">
            <button type="button">Book Now</button>
          </a>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>



{% endif %}



    </div> <!-- סיום content-container -->

</body>
</html>